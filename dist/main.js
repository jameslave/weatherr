"use strict";function _toConsumableArray(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}!function r(t,e,n){function o(a,u){if(!e[a]){if(!t[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=e[a]={exports:{}};t[a][0].call(s.exports,function(r){var e=t[a][1][r];return o(e?e:r)},s,s.exports,r,t,e,n)}return e[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(r,t,e){var n=r("./location"),o=r("./weather-parser");n.get().then(function(r){return n.send(r)}).then(function(r){return o.getWeather(r,8)}).then(function(r){return console.log(r)})},{"./location":2,"./weather-parser":3}],2:[function(r,t,e){e.get=function(){return new Promise(function(r,t){if(!navigator.geolocation)return void t("Browser does not support geolocation");navigator.geolocation.getCurrentPosition(function(t){r({lat:t.coords.latitude,lon:t.coords.longitude})})})},e.send=function(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("POST","/location",!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(r)),n.onerror=function(){e("Connection to server failed")},n.onreadystatechange=function(){4==n.readyState&&200==n.status&&t(JSON.parse(n.responseText))}})}},{}],3:[function(r,t,e){function n(r,t,e){return r>=t&&r<e}function o(r,t){var e=parseInt(r.current_observation.feelslike_f),n=r.hourly_forecast.slice(0,t).map(function(r){return parseInt(r.temp.english)}),o=n.reduce(function(r,t){return r+t})/t,i=o-e,a={2:"very cold",3:"cold",4:"chilly",5:"cool",6:"nice",7:"really nice",8:"hot",9:"very hot"},u=function(r){var t=Math.floor(r/10);return t<2?a[2]:t>9?a[9]:a[t]}(e),c=function(r){return r>8?"get much warmer":r>3?"get warmer":Math.abs(r)<=3?"remain "+u:r<-3?"get cooler":"get much cooler"}(i),s="It's ";return s+=u,s+=" right now, ",s+=c.match(/^remain/g)?"and ":"but ",s+="it's going to ",s+=c,s+="."}function i(r,t){var e=parseInt(r.current_observation.wind_mph),o=r.hourly_forecast.slice(0,t).map(function(r){return parseInt(r.wspd.english)}),i=o.reduce(function(r,t){return r+t})/t,a=i-e,u=function(r){return r>=20?"really windy":n(r,10,20)?"windy":n(r,5,10)?"breezy":"calm"}(e),c=function(r){return r>10?"get much windier":r>5?"get windier":Math.abs(r)<=5?"remain "+u:r<-5?"get calmer":"get much calmer"}(a),s="It's ";return s+=u,s+=" right now, ",s+=c.match(/^remain/g)?"and ":"but ",s+="it's going to ",s+=c,s+="."}function a(r,t){var e=r.hourly_forecast.slice(0,t),o=e.map(function(r){return parseInt(r.pop)}),i=e.map(function(r){return parseInt(r.fctcode)}),a=Math.max.apply(Math,_toConsumableArray(o)),u=Math.max.apply(Math,_toConsumableArray(i));[10,12,14,18,20,22].map(function(r){return u===r}).reduce(function(r,t){return r&&t})&&u++;var c=void 0,s=r.current_observation.icon;c=s.match(/rain|sleet|storm/g)?"rainy":s.match(/snow|flurries/g)?"snowy":"dry";var f=function(r){return r>=80?"It will be wet":n(r,40,80)?"There's a good chance of precipitation":n(r,10,40)?"There's a slight chance of precipitation":"It will be dry"}(a),l="It's ";return l+=c,l+=" right now. ",l+=f,l+=" later."}e.getWeather=function(r,t){return new Promise(function(e,n){var u={};u.loc=r.current_observation.display_location.city,u.tempF=r.current_observation.feelslike_f,u.tempC=r.current_observation.feelslike_c,u.tempStr=o(r,t),u.windStr=i(r,t),u.precipStr=a(r,t),e(u)})}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsIkVycm9yIiwiZiIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsImxvY2F0aW9uIiwicGFyc2VyIiwidGhlbiIsImxvYyIsInNlbmQiLCJqc29uIiwib3V0cHV0IiwiY29uc29sZSIsIi4vbG9jYXRpb24iLCIuL3dlYXRoZXItcGFyc2VyIiwiMiIsImdldCIsIlByb21pc2UiLCJyZWplY3QiLCJuYXZpZ2F0b3IiLCJnZW9sb2NhdGlvbiIsIndlYXRoZXJEYXRhIiwicG9zIiwicmVzb2x2ZSIsImxhdGl0dWRlIiwibG9uIiwiY29vcmRzIiwibG9uZ2l0dWRlIiwiY29vcmRzT2JqIiwiWE1MSHR0cFJlcXVlc3QiLCJyZXEiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsImxhdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCIzIiwiYmV0d2VlbiIsImxldGlhYmxlIiwieDAiLCJ4MSIsIm9uZXJyb3IiLCJob3Vyc0FoZWFkIiwicGFyc2VJbnQiLCJjdXJyZW50X29ic2VydmF0aW9uIiwiZmVlbHNsaWtlX2YiLCJmdXR1cmVUZW1wcyIsImhvdXJseV9mb3JlY2FzdCIsInNsaWNlIiwibWFwIiwiaG91ciIsInRlbXAiLCJlbmdsaXNoIiwibWVhbkZ1dHVyZVRlbXAiLCJiIiwidGVtcERpZmYiLCJjdXJyZW50VGVtcCIsInRlbXBTdHJzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiY3VycmVudERlc2MiLCJmb3JtYXRUZW1wIiwiaW5kZXgiLCJmdXR1cmVEZXNjIiwiZGlmZiIsIk1hdGgiLCJjb25jYXRUZW1wIiwibWF0Y2giLCJmb3JtYXRXaW5kIiwiY3VycmVudFdpbmQiLCJ3aW5kX21waCIsImZ1dHVyZVdpbmRzIiwid3NwZCIsIm1lYW5GdXR1cmVXaW5kIiwicmVkdWNlIiwid2luZERpZmYiLCJ3aW5kIiwiYWJzIiwiY29uY2F0V2luZCIsImZvcm1hdFByZWNpcCIsImZ1dHVyZUhvdXJzIiwicG9wIiwibWF4IiwiYXBwbHkiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJmdXR1cmVQcm9icyIsIm1heEZvcmVjYXN0Q29kZSIsImZ1dHVyZUNvZGVzIiwiYyIsImljb24iLCJwcm9iIiwibWF4UHJlY2lwUHJvYiIsImNvbmNhdFByZWNpcCIsImdldFdlYXRoZXIiLCJkaXNwbGF5X2xvY2F0aW9uIiwiY2l0eSIsImZlZWxzbGlrZV9jIiwidGVtcFN0ciIsInByZWNpcFN0ciJdLCJtYXBwaW5ncyI6InVKQUFBLFFBQVVBLEdBQUVDLEVBQUVDLEVBQUVDLEdBQUcsUUFBU0MsR0FBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLEdBQUlFLEdBQWtCLGtCQUFUQyxVQUFxQkEsT0FBUSxLQUFJRixHQUFHQyxFQUFFLE1BQU9BLEdBQUVGLEdBQUUsRUFBSSxJQUFHSSxFQUFFLE1BQU9BLEdBQUVKLEdBQUUsRUFBSSxNQUFNLElBQUlLLE9BQU0sdUJBQXVCTCxFQUFFLEtBQUssR0FBSU0sR0FBRVQsRUFBRUcsSUFBSU8sV0FBWVgsR0FBRUksR0FBRyxHQUFHUSxLQUFLRixFQUFFQyxRQUFRLFNBQVNaLEdBQUcsR0FBSUUsR0FBRUQsRUFBRUksR0FBRyxHQUFHTCxFQUFHLE9BQU9JLEdBQUVGLEVBQUVBLEVBQUVGLElBQUlXLEVBQUVBLEVBQUVDLFFBQVFaLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsTUFBT0QsR0FBRUcsR0FBR08sUUFBa0QsSUFBSSxHQUExQ0gsR0FBa0Isa0JBQVRELFVBQXFCQSxRQUFnQkgsRUFBRSxFQUFFQSxFQUFFRixFQUFFVyxPQUFPVCxJQUFJRCxFQUFFRCxFQUFFRSxHQUFJLE9BQU9ELEtBQUtXLEdBQUcsU0FBU1AsRUFBUVEsRUFBT0osR0FDcmIsR0FBSUssR0FBV1QsRUFBUSxjQUN0QlUsRUFBU1YsRUFBUSxtQkFGaUJTLEdBQU1aLE1BQUljLEtBQUcsU0FBQUMsR0FBQSxNQUFNSCxHQUFBSSxLQUFBRCxLQUFDRCxLQUFBLFNBQUFHLEdBQUEsTUFBTUosR0FBT1YsV0FBU2MsRUFBQSxLQUE4R0gsS0FBQSxTQUFBSSxHQUFBLE1BQU1DLFNBQU1aLElBQUFBLE9BQStDYSxhQUFNLEVBQUFDLG1CQUFvQixJQUFGQyxHQUFQLFNBQUFuQixFQUFBUSxFQUFBSixHQUFnQkEsRUFBcEVnQixJQUF5RWhCLFdBQXFDLE1BQUlILElBQUVvQixTQUFPckIsU0FBQUEsRUFBU3NCLEdBQXVELElBQUFDLFVBQUFDLFlBcUIzWSxXQWpCSEYsR0FBSUcsdUNBSnFaRixXQUFJQyxZQUFTeEIsbUJBQVQsU0FBQTBCLEdBQzdaQyxHQUFJbEIsSUFBV1QsRUFBQUEsT0FBUTRCLFNBQXZCQyxJQUFBSCxFQUFBSSxPQUFBQyxpQkFPTzNCLEVBQ0xPLEtBQUssU0FBQXFCLEdBQUEsTUFIUCxJQUFBWCxTQUFBLFNBQUFNLEVBQUFMLEdBS0FsQixHQUFBQSxHQUFRZ0IsR0FBTWEsZUFFYkMsR0FBQUMsS0FBTyxPQUFJZCxhQUFTTSxHQUNuQk8sRUFBQUUsaUJBQUEsZUFBQSxvQkFDQUYsRUFBQXJCLEtBQUlVLEtBQUFBLFVBQVVDLElBRVpHLEVBQUFBLFFBQVNVLFdBQ1RmLEVBRkQsZ0NBS0FZLEVBQUFJLG1CQUFBLFdBQ0EsR0FBQUosRUFBQUssWUFBQSxLQUFBTCxFQUFBTSxRQVhIYixFQUFBYyxLQUFBQyxNQUFBUixFQUFBUyx3QkFrQkVDLEdBQUEsU0FBQTVDLEVBQUFRLEVBQUFKLEdBcUJGLFFBQVN5QyxHQUFRQyxFQUFVQyxFQUFJQyxHQWxCN0JkLE1BQUlDLElBQUpZLEdBQWlCRCxFQUFhRSxFQUk5QmQsUUFBSWUsR0FBVW5DLEVBQUFvQyxHQUNiNUIsR0FBQUEsR0FBTzZCLFNBQUFyQyxFQUFBc0Msb0JBQVBDLGFBQ0FDLEVBQUF4QyxFQUFBeUMsZ0JBQUFDLE1BQUEsRUFBQU4sR0FBQU8sSUFBQSxTQUFBQyxHQUNBLE1BSERQLFVBQUFPLEVBQUFDLEtBQUFDLFdBS0NDLEVBQVF0QixFQUFtQkwsT0FBSU0sU0FBSnpDLEVBQUErRCxHQUFtQixNQUFBL0QsR0FBQStELElBQUFaLEVBQzdDYSxFQUFBRixFQUFBRyxFQUVBQyxHQUNEOUMsRUFMRCxZQU1BeUIsRUFsQkQsT0FtQkFzQixFQXJCRCxTQWhCMkNDLEVBc0N6QyxPQUNGQyxFQUFBLE9BQ0FDLEVBQUEsY0FDQ0MsRUFBQSxNQUNBQyxFQUFBLFlBR0RDLEVBQVNDLFNBQWlCdkIsR0FDekIsR0FBQXdCLEdBQUlWLEtBQUFBLE1BQWNiLEVBQVNyQyxHQUMzQixPQUFBNEQsR0FBSXBCLEVBQWN4QyxFQUFLeUMsR0FDdEJtQixFQUFPdkIsRUFBU08sRUFBVUUsR0FEM0JLLEVBQUFTLElBR0FWLEdBQXFCVyxFQUFyQixTQUFBQyxHQUNBLE1BQUFBLEdBQUliLEVBQVdGLGtCQXNCVmUsRUFBTyxFQUFVLGFBcEJ0QkMsS0FBSVosSUFBQUEsSUFBVyxFQUFBLFVBQUFPLEVBQ2RJLEdBQUcsRUFEVyxhQUVYLG1CQUNIYixHQUVBZSxFQUxjLE9BYWQsT0FQQUEsSUFBR04sRUFDSE0sR0FQYyxlQVFkQSxHQUFHSCxFQUFBSSxNQUFBLFlBQUEsT0FBQSxPQVJXRCxHQUFmLGlCQStCQUEsR0FBY0gsRUFwQmRHLEdBQUlOLElBMkJMLFFBQVNRLEdBQVdsRSxFQUFNb0MsR0FwQnpCLEdBQUErQixHQUFJTixTQUFjN0QsRUFBUzhELG9CQUFNTSxVQUNoQ0MsRUFBY3JFLEVBQUF5QyxnQkFBT0MsTUFBUCxFQUFBTixHQUFBTyxJQUFBLFNBQUFDLEdBQ2QsTUFBSWtCLFVBQVVsQixFQUFBMEIsS0FBT3hCLFdBRXJCeUIsRUFBZUYsRUFBT0csT0FBUCxTQUFBdkYsRUFBQStELEdBQUEsTUFBQS9ELEdBQUErRCxJQUFBWixFQUNmcUMsRUFBT0YsRUFBUEosRUF1QkdULEVBQWUsU0FBU2dCLEdBcEI1QixNQUFBQSxJQUFJVixHQUFhLGVBQ2pCQSxFQUFBQSxFQUFjTixHQUFBQSxJQUFkLFFBQ0FNLEVBQUFBLEVBQWMsRUFBQSxJQUFkLFNBQ0FBLFFBQ0FBLEdBRUFBLEVBQWMsU0FBZEYsR0FzQkMsTUFBSUEsR0FBTyxHQUFhLG1CQXBCekJBLEVBQU9FLEVBQVAsY0FDQUQsS0FBQVksSUFBQWIsSUFBQSxFQUFBLFVBQUFKLEVBc0JLSSxHQUFPLEVBQWEsYUFwQjFCLG1CQUNBVyxHQUVDRyxFQUFJUCxPQU1KLE9BTENPLElBQU92QyxFQUNQdUMsR0FGRCxlQUdBQSxHQUFJTCxFQUFpQkYsTUFBQUEsWUFBbUIsT0FBQSxPQUFXTyxHQUFXNUIsaUJBQUU0QixHQUFJeEMsRUFDcEV3QyxHQUFJSCxJQU1ILFFBQUFJLEdBQUE3RSxFQUFBb0MsR0FNQSxHQUFBMEMsR0FBYWhCLEVBQVRyQixnQkFBOEJDLE1BQUEsRUFBQU4sR0FHaENxQyxFQU5ISyxFQUFBbkMsSUFBQSxTQUFBQyxHQThCQyxNQUFPUCxVQUFTTyxFQUFLbUMsT0FwQnRCSCxFQUFjRSxFQUFkbkMsSUFBQSxTQUFBQyxHQUNBZ0MsTUFBQUEsVUFBY2YsRUFBQUEsV0FHZGUsRUFBQWIsS0FBQWlCLElBQUFDLE1BQUFsQixLQUFBbUIsbUJBQUFDLElBd0JJQyxFQUFrQnJCLEtBQUtpQixJQUFMQyxNQUFBbEIsS0FBQW1CLG1CQUFZRyxLQXJCbEMsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBQUExQyxJQUFBLFNBQUEyQyxHQUFBLE1BQUFGLEtBQUFFLElBQUFkLE9BQUEsU0FBQXZGLEVBQUErRCxHQUFBLE1BQUEvRCxJQUFBK0QsS0F3QkNvQyxHQXBCRCxJQUFBMUIsR0FBQUEsT0F3Qkk2QixFQUFPdkYsRUFBS3NDLG9CQUFvQmlELElBRUc3QixHQUFsQzZCLEVBQUt0QixNQUFNLHFCQUFxQyxRQUMzQ3NCLEVBQUt0QixNQUFNLGtCQUFrQyxRQXRCbkRhLEtBRUosSUFBQWpCLEdBQUEsU0FBQTJCLEdBQ0EsTUFBQUEsSUFBSUwsR0FBY0wsaUJBQ2pCL0MsRUFBT00sRUFBU08sR0FBS21DLElBQXJCLHlDQUREaEQsRUFBQXlELEVBQUEsR0FBQSxJQUFBLDJDQUdBLGtCQUNBQyxHQUFBQyxFQUFBLE9BT3VDLE9BbUJ2Q0EsSUFBZ0JoQyxFQXRCaEJnQyxHQUFJRCxlQUNKQyxHQUFJTixFQXdCSk0sR0FBZ0IsVUF0QnFGcEcsRUFBR3FHLFdBQUEsU0FBQTNGLEVBQUFvQyxHQUN2R2dELE1BQUFBLElBQUFBLFNBQUFBLFNBQUFBLEVBQUFBLEdBQ0EsR0FBQXpFLEtBNEJBQSxHQUFZYixJQUFNRSxFQUFLc0Msb0JBQW9Cc0QsaUJBQWlCQyxLQTFCN0RsRixFQUFJK0MsTUFBQUEsRUFBSnBCLG9CQUFBQyxZQUNBNUIsRUFBV1gsTUFBS3NDLEVBQUFBLG9CQUFoQndELFlBNEJDbkYsRUFBWW9GLFFBQVVwQyxFQUFXM0QsRUFBTW9DLEdBMUJ4Q3pCLEVBQVVzRCxRQUFNQyxFQUFBbEUsRUFBdUIwRCxHQTRCdEMvQyxFQUFZcUYsVUFBWW5CLEVBQWE3RSxFQUFNb0MsR0F4QjVDdkIsRUFBSWdELGdCQUdDOUIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbmxldCBsb2NhdGlvbiA9IHJlcXVpcmUoJy4vbG9jYXRpb24nKSxcclxuXHRwYXJzZXIgPSByZXF1aXJlKCcuL3dlYXRoZXItcGFyc2VyJylcclxuXHJcbmxldCB3ZWF0aGVyRGF0YSA9IG51bGxcclxuXHJcbmxvY2F0aW9uLmdldCgpXHJcblx0LnRoZW4obG9jID0+IGxvY2F0aW9uLnNlbmQobG9jKSlcclxuXHQudGhlbihqc29uID0+IHBhcnNlci5nZXRXZWF0aGVyKGpzb24sIDgpKVxyXG5cdC50aGVuKG91dHB1dCA9PiBjb25zb2xlLmxvZyhvdXRwdXQpKVxufSx7XCIuL2xvY2F0aW9uXCI6MixcIi4vd2VhdGhlci1wYXJzZXJcIjozfV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5leHBvcnRzLmdldCA9ICgpID0+IHtcclxuXHQvLyBwcm9taXNlIHJldHVybnMgdXNlciBsb2NhdGlvbiB3aGVuIGl0J3MgZGV0ZXJtaW5lZFxyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHQvLyBpZiBicm93c2VyIGNhbiBnZXQgdXNlcidzIGxvY2F0aW9uXHJcblx0XHRpZiAobmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XHJcblx0XHRcdG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24ocG9zID0+IHtcclxuXHRcdFx0XHRyZXNvbHZlKHtsYXQ6IHBvcy5jb29yZHMubGF0aXR1ZGUsIGxvbjogcG9zLmNvb3Jkcy5sb25naXR1ZGV9KVxyXG5cdFx0XHR9KVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVqZWN0KCdCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgZ2VvbG9jYXRpb24nKVxyXG5cdFx0XHRyZXR1cm5cclxuXHRcdH1cclxuXHR9KVxyXG59XHJcblxyXG5leHBvcnRzLnNlbmQgPSAoY29vcmRzT2JqKSA9PiB7XHJcblx0Ly8gcHJvbWlzZSByZXR1cm5zIHNlcnZlciByZXNwb25zZSB3aGVuIGl0J3MgcmVjZWl2ZWRcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0Ly8gUE9TVCB1c2VyJ3MgbG9jYXRpb24gdG8gdGhlIHNlcnZlciwgd2hpY2ggd2lsbCBtYWtlIHRoZSBBUEkgY2FsbFxyXG5cdFx0dmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXHJcblx0XHRcclxuXHRcdHJlcS5vcGVuKCdQT1NUJywgJy9sb2NhdGlvbicsIHRydWUpXHJcblx0XHRyZXEuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKVxyXG5cdFx0cmVxLnNlbmQoSlNPTi5zdHJpbmdpZnkoY29vcmRzT2JqKSlcclxuXHJcblx0XHRyZXEub25lcnJvciA9ICgpID0+IHtcclxuXHRcdFx0cmVqZWN0KCdDb25uZWN0aW9uIHRvIHNlcnZlciBmYWlsZWQnKVxyXG5cdFx0XHRyZXR1cm5cclxuXHRcdH1cclxuXHRcdHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XHJcblx0XHRcdGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0ICYmIHJlcS5zdGF0dXMgPT0gMjAwKSB7XHJcblx0XHRcdFx0Ly8gcmVzb2x2ZSBwcm9taXNlIGlmIHJlcXVlc3QgaXMgY29tcGxldGUgYW5kIE9LXHJcblx0XHRcdFx0cmVzb2x2ZShKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSlcclxufVxufSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vLyBoZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgbGV0aWFibGUgaXMgaW4gcmFuZ2VcclxuZnVuY3Rpb24gYmV0d2VlbihsZXRpYWJsZSwgeDAsIHgxKSB7XHJcblx0cmV0dXJuIGxldGlhYmxlID49IHgwICYmIGxldGlhYmxlIDwgeDFcclxufVxyXG5cclxuLy8gZm9ybWF0cyB0ZW1wZXJhdHVyZSBhcyBhIGRlc2NyaXB0aXZlIHN0cmluZ1xyXG5mdW5jdGlvbiBmb3JtYXRUZW1wKGpzb24sIGhvdXJzQWhlYWQpIHtcclxuXHRsZXQgY3VycmVudFRlbXAgPSBwYXJzZUludChqc29uLmN1cnJlbnRfb2JzZXJ2YXRpb24uZmVlbHNsaWtlX2YpXHJcblx0bGV0IGZ1dHVyZVRlbXBzID0ganNvbi5ob3VybHlfZm9yZWNhc3Quc2xpY2UoMCwgaG91cnNBaGVhZCkubWFwKGhvdXIgPT4ge1xyXG5cdFx0cmV0dXJuIHBhcnNlSW50KGhvdXIudGVtcC5lbmdsaXNoKVxyXG5cdH0pXHJcblx0bGV0IG1lYW5GdXR1cmVUZW1wID0gZnV0dXJlVGVtcHMucmVkdWNlKChhLCBiKSA9PiB7cmV0dXJuIGEgKyBifSkgLyBob3Vyc0FoZWFkXHJcblx0bGV0IHRlbXBEaWZmID0gbWVhbkZ1dHVyZVRlbXAgLSBjdXJyZW50VGVtcFxyXG5cclxuXHRsZXQgdGVtcFN0cnMgPSB7XHJcblx0XHQyOiAndmVyeSBjb2xkJyxcclxuXHRcdDM6ICdjb2xkJyxcclxuXHRcdDQ6ICdjaGlsbHknLFxyXG5cdFx0NTogJ2Nvb2wnLFxyXG5cdFx0NjogJ25pY2UnLFxyXG5cdFx0NzogJ3JlYWxseSBuaWNlJyxcclxuXHRcdDg6ICdob3QnLFxyXG5cdFx0OTogJ3ZlcnkgaG90J1xyXG5cdH1cclxuXHJcblx0bGV0IGN1cnJlbnREZXNjID0gKGZ1bmN0aW9uKHRlbXApIHtcclxuXHRcdGxldCBpbmRleCA9IE1hdGguZmxvb3IodGVtcCAvIDEwKVxyXG5cdFx0aWYgKGluZGV4IDwgMikgcmV0dXJuIHRlbXBTdHJzWzJdXHJcblx0XHRpZiAoaW5kZXggPiA5KSByZXR1cm4gdGVtcFN0cnNbOV1cclxuXHRcdHJldHVybiB0ZW1wU3Ryc1tpbmRleF1cclxuXHR9KShjdXJyZW50VGVtcClcclxuXHJcblx0bGV0IGZ1dHVyZURlc2MgPSAoZnVuY3Rpb24oZGlmZikge1xyXG5cdFx0aWYgKGRpZmYgPiA4KSByZXR1cm4gJ2dldCBtdWNoIHdhcm1lcidcclxuXHRcdGlmIChkaWZmID4gMykgcmV0dXJuICdnZXQgd2FybWVyJ1xyXG5cdFx0aWYgKE1hdGguYWJzKGRpZmYpIDw9IDMpIHJldHVybiAncmVtYWluICcgKyBjdXJyZW50RGVzY1xyXG5cdFx0aWYgKGRpZmYgPCAtMykgcmV0dXJuICdnZXQgY29vbGVyJ1xyXG5cdFx0cmV0dXJuICdnZXQgbXVjaCBjb29sZXInXHJcblx0fSkodGVtcERpZmYpXHJcblxyXG5cdGxldCBjb25jYXRUZW1wID0gJ0l0XFwncyAnXHJcblx0Y29uY2F0VGVtcCArPSBjdXJyZW50RGVzY1xyXG5cdGNvbmNhdFRlbXAgKz0gJyByaWdodCBub3csICdcclxuXHRjb25jYXRUZW1wICs9IGZ1dHVyZURlc2MubWF0Y2goL15yZW1haW4vZykgPyAnYW5kICcgOiAnYnV0ICdcclxuXHRjb25jYXRUZW1wICs9ICdpdFxcJ3MgZ29pbmcgdG8gJ1xyXG5cdGNvbmNhdFRlbXAgKz0gZnV0dXJlRGVzY1xyXG5cdGNvbmNhdFRlbXAgKz0gJy4nXHJcblxyXG5cdHJldHVybiBjb25jYXRUZW1wXHJcbn1cclxuXHJcbi8vIGZvcm1hdHMgd2luZCBhcyBhIGRlc2NyaXB0aXZlIHN0cmluZ1xyXG5mdW5jdGlvbiBmb3JtYXRXaW5kKGpzb24sIGhvdXJzQWhlYWQpIHtcclxuXHRsZXQgY3VycmVudFdpbmQgPSBwYXJzZUludChqc29uLmN1cnJlbnRfb2JzZXJ2YXRpb24ud2luZF9tcGgpXHJcblx0bGV0IGZ1dHVyZVdpbmRzID0ganNvbi5ob3VybHlfZm9yZWNhc3Quc2xpY2UoMCwgaG91cnNBaGVhZCkubWFwKGhvdXIgPT4ge1xyXG5cdFx0cmV0dXJuIHBhcnNlSW50KGhvdXIud3NwZC5lbmdsaXNoKVxyXG5cdH0pXHJcblx0bGV0IG1lYW5GdXR1cmVXaW5kID0gZnV0dXJlV2luZHMucmVkdWNlKChhLCBiKSA9PiB7cmV0dXJuIGEgKyBifSkgLyBob3Vyc0FoZWFkXHJcblx0bGV0IHdpbmREaWZmID0gbWVhbkZ1dHVyZVdpbmQgLSBjdXJyZW50V2luZFxyXG5cclxuXHRsZXQgY3VycmVudERlc2MgPSAoZnVuY3Rpb24od2luZCkge1xyXG5cdFx0aWYgKHdpbmQgPj0gMjAuMCkgcmV0dXJuICdyZWFsbHkgd2luZHknXHJcblx0XHRpZiAoYmV0d2Vlbih3aW5kLCAxMC4wLCAyMC4wKSkgcmV0dXJuICd3aW5keSdcclxuXHRcdGlmIChiZXR3ZWVuKHdpbmQsIDUuMCwgMTAuMCkpIHJldHVybiAnYnJlZXp5J1xyXG5cdFx0cmV0dXJuICdjYWxtJ1xyXG5cdH0pKGN1cnJlbnRXaW5kKVxyXG5cclxuXHRsZXQgZnV0dXJlRGVzYyA9IChmdW5jdGlvbihkaWZmKSB7XHJcblx0XHRpZiAoZGlmZiA+IDEwLjApIHJldHVybiAnZ2V0IG11Y2ggd2luZGllcidcclxuXHRcdGlmIChkaWZmID4gNS4wKSByZXR1cm4gJ2dldCB3aW5kaWVyJ1xyXG5cdFx0aWYgKE1hdGguYWJzKGRpZmYpIDw9IDUuMCkgcmV0dXJuICdyZW1haW4gJyArIGN1cnJlbnREZXNjXHJcblx0XHRpZiAoZGlmZiA8IC01LjApIHJldHVybiAnZ2V0IGNhbG1lcidcclxuXHRcdHJldHVybiAnZ2V0IG11Y2ggY2FsbWVyJ1xyXG5cdH0pKHdpbmREaWZmKVxyXG5cclxuXHRsZXQgY29uY2F0V2luZCA9ICdJdFxcJ3MgJ1xyXG5cdGNvbmNhdFdpbmQgKz0gY3VycmVudERlc2NcclxuXHRjb25jYXRXaW5kICs9ICcgcmlnaHQgbm93LCAnXHJcblx0Y29uY2F0V2luZCArPSBmdXR1cmVEZXNjLm1hdGNoKC9ecmVtYWluL2cpID8gJ2FuZCAnIDogJ2J1dCAnXHJcblx0Y29uY2F0V2luZCArPSAnaXRcXCdzIGdvaW5nIHRvICdcclxuXHRjb25jYXRXaW5kICs9IGZ1dHVyZURlc2NcclxuXHRjb25jYXRXaW5kICs9ICcuJ1xyXG5cclxuXHRyZXR1cm4gY29uY2F0V2luZFxyXG59XHJcblxyXG4vLyBmb3JtYXRzIHByZWNpcGl0YXRpb24gYXMgYSBkZXNjcmlwdGl2ZSBzdHJpbmdcclxuZnVuY3Rpb24gZm9ybWF0UHJlY2lwKGpzb24sIGhvdXJzQWhlYWQpIHtcclxuXHQvKiBGaW5kIG1heCBwcmVjaXAgcHJvYmFiaWxpdHkgYW5kIG1heCBmb3JlY2FzdCBjb2RlIGFzIGdpdmVuIGF0IFxyXG5cdFx0IGh0dHA6Ly93d3cud3VuZGVyZ3JvdW5kLmNvbS93ZWF0aGVyL2FwaS9kL2RvY3M/ZD1yZXNvdXJjZXMvcGhyYXNlLWdsb3NzYXJ5LlxyXG5cdFx0IFRoaXMgY2FuIGJlIGNvcnJlbGF0ZWQgd2l0aCBjbGVhci9yYWluL3Nub3cuXHJcblx0Ki9cclxuXHJcblx0bGV0IGZ1dHVyZUhvdXJzID0ganNvbi5ob3VybHlfZm9yZWNhc3Quc2xpY2UoMCwgaG91cnNBaGVhZClcclxuXHRcclxuXHQvLyBnZXQgZnV0dXJlIHByb2JhYmlsaXRpZXMgb2YgcHJlY2lwaXRhdGlvblxyXG5cdGxldCBmdXR1cmVQcm9icyA9IGZ1dHVyZUhvdXJzLm1hcChob3VyID0+IHtcclxuXHRcdHJldHVybiBwYXJzZUludChob3VyLnBvcClcclxuXHR9KVxyXG5cdC8vIGFuZCBmdXR1cmUgZm9yZWNhc3QgY29kZXNcclxuXHRsZXQgZnV0dXJlQ29kZXMgPSBmdXR1cmVIb3Vycy5tYXAoaG91ciA9PiB7XHJcblx0XHRyZXR1cm4gcGFyc2VJbnQoaG91ci5mY3Rjb2RlKVxyXG5cdH0pXHJcblxyXG5cdGxldCBtYXhQcmVjaXBQcm9iID0gTWF0aC5tYXgoLi4uZnV0dXJlUHJvYnMpXHJcblx0bGV0IG1heEZvcmVjYXN0Q29kZSA9IE1hdGgubWF4KC4uLmZ1dHVyZUNvZGVzKVxyXG5cclxuXHRpZiAoWzEwLCAxMiwgMTQsIDE4LCAyMCwgMjJdLm1hcChjID0+IHtyZXR1cm4gbWF4Rm9yZWNhc3RDb2RlID09PSBjfSkucmVkdWNlKChhLGIpID0+IHtyZXR1cm4gYSAmJiBifSkpIHtcclxuXHRcdG1heEZvcmVjYXN0Q29kZSsrXHJcblx0fVxyXG5cclxuXHRsZXQgY3VycmVudERlc2NcclxuXHRsZXQgaWNvbiA9IGpzb24uY3VycmVudF9vYnNlcnZhdGlvbi5pY29uXHJcblxyXG5cdGlmICggaWNvbi5tYXRjaCgvcmFpbnxzbGVldHxzdG9ybS9nKSApIGN1cnJlbnREZXNjID0gJ3JhaW55J1xyXG5cdGVsc2UgaWYgKCBpY29uLm1hdGNoKC9zbm93fGZsdXJyaWVzL2cpICkgY3VycmVudERlc2MgPSAnc25vd3knXHJcblx0ZWxzZSBjdXJyZW50RGVzYyA9ICdkcnknXHJcblxyXG5cdGxldCBmdXR1cmVEZXNjID0gKGZ1bmN0aW9uKHByb2IpIHtcclxuXHRcdGlmIChwcm9iID49IDgwLjApIHJldHVybiAnSXQgd2lsbCBiZSB3ZXQnXHJcblx0XHRpZiAoYmV0d2Vlbihwcm9iLCA0MC4wLCA4MC4wKSkgcmV0dXJuICdUaGVyZVxcJ3MgYSBnb29kIGNoYW5jZSBvZiBwcmVjaXBpdGF0aW9uJ1xyXG5cdFx0aWYgKGJldHdlZW4ocHJvYiwgMTAuMCwgNDAuMCkpIHJldHVybiAnVGhlcmVcXCdzIGEgc2xpZ2h0IGNoYW5jZSBvZiBwcmVjaXBpdGF0aW9uJ1xyXG5cdFx0cmV0dXJuICdJdCB3aWxsIGJlIGRyeSdcclxuXHR9KShtYXhQcmVjaXBQcm9iKVxyXG5cclxuXHRsZXQgY29uY2F0UHJlY2lwID0gJ0l0XFwncyAnXHJcblx0Y29uY2F0UHJlY2lwICs9IGN1cnJlbnREZXNjXHJcblx0Y29uY2F0UHJlY2lwICs9ICcgcmlnaHQgbm93LiAnXHJcblx0Y29uY2F0UHJlY2lwICs9IGZ1dHVyZURlc2NcclxuXHRjb25jYXRQcmVjaXAgKz0gJyBsYXRlci4nXHJcblxyXG5cdHJldHVybiBjb25jYXRQcmVjaXBcclxufVxyXG5cclxuZXhwb3J0cy5nZXRXZWF0aGVyID0gZnVuY3Rpb24oanNvbiwgaG91cnNBaGVhZCkge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRsZXQgd2VhdGhlckRhdGEgPSB7fVxyXG5cdFx0d2VhdGhlckRhdGEubG9jID0ganNvbi5jdXJyZW50X29ic2VydmF0aW9uLmRpc3BsYXlfbG9jYXRpb24uY2l0eVxyXG5cdFx0d2VhdGhlckRhdGEudGVtcEYgPSBqc29uLmN1cnJlbnRfb2JzZXJ2YXRpb24uZmVlbHNsaWtlX2ZcclxuXHRcdHdlYXRoZXJEYXRhLnRlbXBDID0ganNvbi5jdXJyZW50X29ic2VydmF0aW9uLmZlZWxzbGlrZV9jXHJcblx0XHR3ZWF0aGVyRGF0YS50ZW1wU3RyID0gZm9ybWF0VGVtcChqc29uLCBob3Vyc0FoZWFkKVxyXG5cdFx0d2VhdGhlckRhdGEud2luZFN0ciA9IGZvcm1hdFdpbmQoanNvbiwgaG91cnNBaGVhZClcclxuXHRcdHdlYXRoZXJEYXRhLnByZWNpcFN0ciA9IGZvcm1hdFByZWNpcChqc29uLCBob3Vyc0FoZWFkKVxyXG5cdFx0cmVzb2x2ZSh3ZWF0aGVyRGF0YSlcclxuXHR9KVxyXG59XG59LHt9XX0se30sWzFdKSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
